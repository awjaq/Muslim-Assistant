###############################################################################
# Muslim Assistant - Lovelace Dashboard
#
# This dashboard is AUTOMATICALLY CREATED when you install Muslim Assistant.
# Check your sidebar for "Muslim Assistant".
#
# If you need to add it manually:
#   1. Go to Settings > Dashboards > + Add Dashboard
#   2. Name: "Muslim Assistant", Icon: mdi:mosque
#   3. Open it > Edit Dashboard > 3-dot menu > Raw configuration editor
#   4. Paste this file's contents and Save
#
# OR add to configuration.yaml:
#   lovelace:
#     dashboards:
#       muslim-assistant:
#         mode: yaml
#         title: Muslim Assistant
#         icon: mdi:mosque
#         show_in_sidebar: true
#         filename: muslim_assistant_dashboard.yaml
###############################################################################

views:
  - title: Muslim Assistant
    path: muslim-assistant
    icon: mdi:star-crescent
    type: sections
    max_columns: 4
    sections:

      # ═══════════════════════════════════════════════════════════════════════
      # COLUMN 1: Prayer Times
      # ═══════════════════════════════════════════════════════════════════════
      - title: Prayer Times
        type: grid
        cards:
          # ── Hero: Next Prayer ──
          - type: markdown
            content: |
              # {{ states('sensor.muslim_assistant_next_prayer') }}
              ## {{ state_attr('sensor.muslim_assistant_next_prayer', 'time') }}
              {{ state_attr('sensor.muslim_assistant_next_prayer', 'time_remaining') }} remaining

          # ── Today's Schedule ──
          - type: entities
            show_header_toggle: false
            entities:
              - entity: sensor.muslim_assistant_fajr_prayer_time
                name: Fajr
                icon: mdi:weather-sunset-up
              - entity: sensor.muslim_assistant_sunrise_prayer_time
                name: Sunrise
                icon: mdi:weather-sunny
              - entity: sensor.muslim_assistant_dhuhr_prayer_time
                name: Dhuhr
                icon: mdi:white-balance-sunny
              - entity: sensor.muslim_assistant_asr_prayer_time
                name: Asr
                icon: mdi:weather-sunny-alert
              - entity: sensor.muslim_assistant_maghrib_prayer_time
                name: Maghrib
                icon: mdi:weather-sunset-down
              - entity: sensor.muslim_assistant_isha_prayer_time
                name: Isha
                icon: mdi:weather-night

      # ═══════════════════════════════════════════════════════════════════════
      # COLUMN 2: Qibla & Calendar
      # ═══════════════════════════════════════════════════════════════════════
      - title: Qibla & Calendar
        type: grid
        cards:
          # ── Qibla Direction ──
          - type: markdown
            content: |
              ### Qibla Direction
              # {{ states('sensor.muslim_assistant_qibla_direction') }}° {{ state_attr('sensor.muslim_assistant_qibla_direction', 'cardinal_direction') }}
              {{ state_attr('sensor.muslim_assistant_qibla_direction', 'instructions') }}

          # ── Hijri Calendar (wide, full date) ──
          - type: markdown
            content: |
              ### Hijri Calendar
              # {{ state_attr('sensor.muslim_assistant_hijri_date', 'hijri_day') }} {{ state_attr('sensor.muslim_assistant_hijri_date', 'hijri_month') }} {{ state_attr('sensor.muslim_assistant_hijri_date', 'hijri_year') }}
              **{{ state_attr('sensor.muslim_assistant_hijri_date', 'hijri_month_arabic') }}** — {{ state_attr('sensor.muslim_assistant_hijri_date', 'hijri_weekday') }} ({{ state_attr('sensor.muslim_assistant_hijri_date', 'hijri_weekday_arabic') }})

              {{ state_attr('sensor.muslim_assistant_hijri_date', 'gregorian_date') }}

          # ── Ramadan Tracker ──
          - type: entity
            entity: sensor.muslim_assistant_ramadan_tracker
            name: Ramadan Tracker
            icon: mdi:moon-waning-crescent

      # ═══════════════════════════════════════════════════════════════════════
      # COLUMN 3: Daily Inspiration
      # ═══════════════════════════════════════════════════════════════════════
      - title: Daily Inspiration
        type: grid
        cards:
          # ── Quran Verse of the Day ──
          - type: markdown
            content: |
              ### Quran Verse
              **{{ states('sensor.muslim_assistant_quran_verse') }}**

              {{ state_attr('sensor.muslim_assistant_quran_verse', 'text_arabic') }}

              *{{ state_attr('sensor.muslim_assistant_quran_verse', 'text_translation') }}*

          # ── Name of Allah ──
          - type: markdown
            content: |
              ### Name of Allah #{{ state_attr('sensor.muslim_assistant_name_of_allah', 'number') }}
              # {{ state_attr('sensor.muslim_assistant_name_of_allah', 'arabic') }}
              **{{ states('sensor.muslim_assistant_name_of_allah') }}** — {{ state_attr('sensor.muslim_assistant_name_of_allah', 'meaning') }}

          # ── Daily Dua ──
          - type: markdown
            content: |
              ### Daily Dua
              **{{ states('sensor.muslim_assistant_daily_dua') }}**

              {{ state_attr('sensor.muslim_assistant_daily_dua', 'arabic') }}

              *{{ state_attr('sensor.muslim_assistant_daily_dua', 'transliteration') }}*

              {{ state_attr('sensor.muslim_assistant_daily_dua', 'translation') }}

          # ── Islamic Quote ──
          - type: markdown
            content: |
              ### Islamic Quote
              {{ state_attr('sensor.muslim_assistant_islamic_quote', 'arabic') }}

              *{{ state_attr('sensor.muslim_assistant_islamic_quote', 'quote_full') }}*

              — {{ state_attr('sensor.muslim_assistant_islamic_quote', 'source') }}

      # ═══════════════════════════════════════════════════════════════════════
      # COLUMN 4: Audio & Tools
      # ═══════════════════════════════════════════════════════════════════════
      - title: Audio & Tools
        type: grid
        cards:
          # ── Audio Controls ──
          - type: button
            name: Play Adhan
            icon: mdi:mosque
            icon_height: 40px
            tap_action:
              action: perform-action
              perform_action: muslim_assistant.play_adhan
              data: {}
            hold_action:
              action: none

          - type: button
            name: Al-Fatiha
            icon: mdi:book-open-page-variant
            icon_height: 40px
            tap_action:
              action: perform-action
              perform_action: muslim_assistant.play_quran
              data:
                surah_number: 1
            hold_action:
              action: none

          - type: button
            name: Yasin
            icon: mdi:book-open-page-variant
            icon_height: 40px
            tap_action:
              action: perform-action
              perform_action: muslim_assistant.play_quran
              data:
                surah_number: 36
            hold_action:
              action: none

          - type: button
            name: Ar-Rahman
            icon: mdi:book-open-page-variant
            icon_height: 40px
            tap_action:
              action: perform-action
              perform_action: muslim_assistant.play_quran
              data:
                surah_number: 55
            hold_action:
              action: none

          - type: button
            name: Al-Mulk
            icon: mdi:book-open-page-variant
            icon_height: 40px
            tap_action:
              action: perform-action
              perform_action: muslim_assistant.play_quran
              data:
                surah_number: 67
            hold_action:
              action: none

          - type: button
            name: Al-Baqarah
            icon: mdi:book-open-page-variant
            icon_height: 40px
            tap_action:
              action: perform-action
              perform_action: muslim_assistant.play_quran
              data:
                surah_number: 2
            hold_action:
              action: none

          # ── Tasbih Counter ──
          - type: entity
            entity: sensor.muslim_assistant_tasbih_counter
            name: Tasbih Counter
            icon: mdi:counter

          - type: horizontal-stack
            cards:
              - type: button
                name: "+1"
                icon: mdi:plus
                tap_action:
                  action: perform-action
                  perform_action: muslim_assistant.tasbih_increment
                  data: {}
                hold_action:
                  action: none
                double_tap_action:
                  action: none
              - type: button
                name: Reset
                icon: mdi:restart
                tap_action:
                  action: perform-action
                  perform_action: muslim_assistant.tasbih_reset
                  data: {}
                hold_action:
                  action: none

          # ── Nearby Places ──
          - type: entity
            entity: sensor.muslim_assistant_nearby_mosques
            name: Nearby Mosques
            icon: mdi:mosque

          - type: entity
            entity: sensor.muslim_assistant_halal_restaurants
            name: Halal Restaurants
            icon: mdi:food-halal

          # ── Makkah Live (opens in browser) ──
          - type: button
            name: Makkah Live
            icon: mdi:video
            icon_height: 40px
            tap_action:
              action: url
              url_path: "https://www.youtube.com/@saudiqurantv/live"
            hold_action:
              action: none

          # ── Guides ──
          - type: horizontal-stack
            cards:
              - type: button
                name: Hajj Guide
                icon: mdi:book-open-variant
                tap_action:
                  action: perform-action
                  perform_action: muslim_assistant.get_hajj_guide
                  data: {}
                hold_action:
                  action: none
              - type: button
                name: Umrah Guide
                icon: mdi:walk
                tap_action:
                  action: perform-action
                  perform_action: muslim_assistant.get_umrah_guide
                  data: {}
                hold_action:
                  action: none

          - type: button
            name: 99 Names of Allah
            icon: mdi:star-crescent
            tap_action:
              action: perform-action
              perform_action: muslim_assistant.get_allah_names
              data: {}
            hold_action:
              action: none
